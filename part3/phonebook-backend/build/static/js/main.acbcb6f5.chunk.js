(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),o=t(7),a=t(3),i=t(2),u=t(0),l=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:["Filter by Name: ",Object(u.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.removeDetails,t=e.persons,c=e.allPersons;return console.log("All Person",c),0!==t.length?Object(u.jsx)("div",{children:Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsxs)("li",{children:[e.name,"\xa0",e.number,"\xa0",Object(u.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"delete"})]},e.id)}))})}):Object(u.jsx)("div",{children:Object(u.jsx)("ul",{children:c.map((function(e){return Object(u.jsxs)("li",{children:[e.name,"\xa0",e.number,"\xa0",Object(u.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"delete"})]},e.id)}))})})},d=function(e){var n=e.newContact,t=e.newName,c=e.newNumber,r=e.handleNameChange,o=e.handleNumberChange;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["Name: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsxs)("div",{children:["Number: ",Object(u.jsx)("input",{value:c,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add Information"})})]})})},f=t(4),j=t.n(f),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},v={color:"green",background:"lightgrey",font_size:20,border_style:"solid",border_radius:5,padding:10,margin_bottom:10},x={color:"red",background:"lightgrey",font_size:20,border_style:"solid",border_radius:5,padding:10,margin_bottom:10},p=function(e){var n=e.message;return null===n?null:n.includes("ERROR")?Object(u.jsx)("div",{style:x,className:"error",children:n}):Object(u.jsx)("div",{style:v,className:"error",children:n})},w=function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)(""),f=Object(a.a)(r,2),j=f[0],b=f[1],v=Object(i.useState)(""),x=Object(a.a)(v,2),w=x[0],C=x[1],y=Object(i.useState)(""),N=Object(a.a)(y,2),R=N[0],k=N[1],S=Object(i.useState)([]),_=Object(a.a)(S,2),E=_[0],T=_[1],D=Object(i.useState)(null),F=Object(a.a)(D,2),L=F[0],P=F[1];Object(i.useEffect)((function(){h().then((function(e){T(e)}))}),[]);var A=function(e){return E.filter((function(e){return e.name.toLowerCase()===j.toLowerCase()}))},z=function(e){var n=E.find((function(n){return n.id===e})),t=Object(o.a)(Object(o.a)({},n),{},{number:w});window.confirm("".concat(j," is already added to phonebook,replace the old number with a new one"))&&g(e,t).then((function(n){T(E.map((function(t){return t.id!==e?t:n}))),P("".concat(t.name," was successfully updated")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){console.log(e),T(E.filter((function(e){return e.id!==t.id}))),P("[ERROR] ".concat(t.name," was already deleted from server")),setTimeout((function(){P(null)}),5e3)}))},B=function(e){m(e).then((function(e){T(E.concat(e)),P("".concat(j," was successfully added")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){P("[ERROR] ".concat(e.response.data.error)),setTimeout((function(){P(null)}),5e3),console.log(e.response.data)}))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"PhoneBook"}),Object(u.jsx)(p,{message:L}),Object(u.jsx)("h2",{children:"Search Contact"}),Object(u.jsx)(l,{filterChanges:R,handleFilterChange:function(e){k(e.target.value);var n=E.filter((function(n){return n.name.toLowerCase().match(e.target.value.toLowerCase())}));c(n)}}),Object(u.jsx)("h2",{children:"Add new Contact"}),Object(u.jsx)(d,{newContact:function(e){e.preventDefault();var n={name:j,number:w},t=A(n);0!==t.length?z(t[0].id):B(n),b(""),C("")},newName:j,newNumber:w,handleNameChange:function(e){b(e.target.value)},handleNumberChange:function(e){C(e.target.value)}}),Object(u.jsx)("h2",{children:"Contacts"}),Object(u.jsx)(s,{persons:t,allPersons:E,removeDetails:function(e){var n=E.filter((function(n){return n.id===e})),r=n[0].name,o=n[0].id;window.confirm("Delete ".concat(r," ?"))&&O(o).then((function(){T(E.filter((function(e){return e.id!==o}))),c(t.filter((function(e){return e.id!==o}))),P("".concat(r," was successfully deleted")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){console.log(e),T(E.filter((function(e){return e.id!==o}))),c(t.filter((function(e){return e.id!==o}))),P("[ERROR] ".concat(r," was already deleted from server")),setTimeout((function(){P(null)}),5e3)}))}})]})};t(41);r.a.render(Object(u.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.acbcb6f5.chunk.js.map